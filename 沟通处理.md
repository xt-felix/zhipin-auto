# 沟通处理功能需求文档

## 概述
为了提升AI在与候选人沟通过程中的表现，需要增加公司信息和岗位信息的设置功能。这些信息将作为AI回答候选人问题的重要依据。同时，增加自动处理候选人沟通的功能，提升招聘效率。

## 功能需求

### 1. 公司信息设置（通用信息）
- 公司名称
- 公司地址
- 公司规模
- 公司行业
- 公司简介
- 公司文化/价值观
- 福利待遇概述
- 工作地点
- 公司官网链接

### 2. 岗位信息设置
- 岗位名称
- 岗位职责
- 任职要求
- 薪资范围
- 工作时间
- 是否加班
- 福利待遇详情
- 晋升空间
- 团队介绍
- 工作环境描述

### 3. 沟通处理功能
#### 3.1 功能描述
在自动打招呼的过程中，自动检测并处理候选人的回复消息，实现智能化的沟通管理。

#### 3.2 业务逻辑
1. 在自动打招呼过程中，检测页面左侧菜单栏的"沟通"栏目是否有未读消息数字
2. 如果检测到有未读消息数字，就点击进入沟通页面
3. 在沟通页面中，检测候选人列表中哪些有未读消息数字
4. 对有未读消息的候选人进行处理：
   - 点击进入对话页面
   - 读取沟通记录
   - 使用AI分析沟通记录并自动回复
   - 根据插件设置，点击收集手机号、微信号、简历附件等按钮
5. 处理完一个候选人后，继续检测左侧菜单栏是否还有未读消息
6. 如果还有未读消息，重复上述流程
7. 如果没有未读消息了，就跳转回打招呼页面继续执行原有流程

#### 3.3 关键要点
- 这个功能需要一个独立的开关来控制是否启用
- 不能修改或删除现有的代码逻辑
- 所有与页面元素相关的查找和点击操作都必须在各平台特定的JS文件中实现
- 从liepin平台开始实现

### 4. 插件界面修改
#### 4.1 界面调整需求
- 将现有的大型开始按钮改为小型开始按钮
- 在开始按钮上方添加两个勾选框：
  1. 打招呼
  2. 处理沟通
- 用户必须至少选择一个勾选框后才能点击开始按钮
- 支持三种运行模式：
  1. 单独打招呼（仅勾选"打招呼"）
  2. 单独处理沟通（仅勾选"处理沟通"）
  3. 同时进行（同时勾选"打招呼"和"处理沟通"）

#### 4.2 界面布局示例
```
[√] 打招呼    [√] 处理沟通
[开始] [停止]
```

#### 4.3 功能逻辑
- 当用户勾选"打招呼"时，执行原有的自动打招呼流程
- 当用户勾选"处理沟通"时，执行沟通处理功能
- 当用户同时勾选两项时，两个功能并行执行
- 用户必须至少选择一个选项才能启用开始按钮

## 应用场景

### AI回复候选人问题时的信息支撑
当候选人询问以下问题时，AI可以根据预设的公司信息和岗位信息进行准确回答：

1. "公司地址在哪里？"
2. "这个岗位的具体工作内容是什么？"
3. "工作时间是怎样的？是否会加班？"
4. "公司的福利待遇怎么样？"
5. "公司的发展前景如何？"

## 实现方案

### 数据结构设计
```javascript
// 公司信息配置
const companyInfo = {
  name: "",           // 公司名称
  address: "",        // 公司地址
  scale: "",          // 公司规模
  industry: "",       // 公司行业
  description: "",    // 公司简介
  culture: "",        // 公司文化
  benefits: "",       // 福利待遇
  location: "",       // 工作地点
  website: ""         // 公司官网
};

// 岗位信息配置
const jobInfo = {
  position: "",       // 岗位名称
  responsibilities: [], // 岗位职责
  requirements: [],   // 任职要求
  salary: "",         // 薪资范围
  workHours: "",      // 工作时间
  overtime: "",       // 是否加班
  benefits: "",       // 岗位福利
  growth: "",         // 晋升空间
  team: "",           // 团队介绍
  environment: ""     // 工作环境
};

// 沟通处理配置
const communicationConfig = {
  enabled: false,     // 是否启用沟通处理功能
  collectPhone: true, // 是否收集手机号
  collectWechat: true,// 是否收集微信号
  collectResume: true // 是否收集简历附件
};

// 运行模式配置
const runModeConfig = {
  greetingEnabled: true,     // 是否启用打招呼功能
  communicationEnabled: true // 是否启用沟通处理功能
};
```

### 配置界面设计
在插件的设置界面中增加三个新的配置区域：
1. 公司信息配置区域
2. 岗位信息配置区域
3. 沟通处理配置区域

在主操作界面中增加运行模式选择：
1. 打招呼勾选框
2. 处理沟通勾选框
3. 小型开始按钮

每个区域包含对应的表单字段，用户可以填写和保存相关信息。

### AI集成方案
在AI处理候选人消息时，将公司信息和岗位信息作为上下文提供给AI模型，帮助其生成更准确、更有针对性的回复。

## 后续扩展
1. 支持多个岗位信息的配置和切换
2. 支持公司信息和岗位信息的导入/导出功能
3. 提供信息模板，方便用户快速填写常用内容
4. 增加沟通处理的智能分类功能，自动识别不同类型的消息并采取相应处理策略
5. 提供沟通处理的日志和统计功能，方便用户了解沟通效果